<%= flash[:notice] if flash[:notice] %>

<h1> Video Store </h1>
<h2><%= pluralize @videos.size, 'Video' %></h2>

<% @videos.each do |video| %>

<article>
  <table>
   <tr>
     <td>

       <%= image_tag(video.image_placeholder, class: 'poster_thumbnail') %>
     </td>
     <td>
       <dl>
         <dt><%= link_to video.title, video_path(video) %></dt>
         <dd><%= video.description %></dd>
       </dl>
     </td>
     <td>
       
       <% if current_user && video.has_been_paid? %>
       <strong> <%= "Paid!" %> </strong> <br />
       <%= button_to 'Watch', video_path(video) , method: :get%>
       <% else %>
       <%= number_to_currency(video.price) %><br />
       <%= button_to 'Add to Cart', line_items_path(video) %> 
       <% end %>
     </td>
   </tr>
  </table>
  
</article>

<% end %>